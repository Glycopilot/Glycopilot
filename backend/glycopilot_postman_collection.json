{
    "info": {
        "_postman_id": "b3e3e4a1-8d2b-4e4a-9b1e-2e5a7b6c8d9e",
        "name": "Glycopilot API",
        "description": "API collection for Glycopilot backend.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Patient",
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Register (Patient)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/register/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "register",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"patient@example.com\",\n    \"first_name\": \"Jean\",\n    \"last_name\": \"Dupont\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"role\": \"PATIENT\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }",
                                            "if (jsonData.refresh) { pm.collectionVariables.set(\"refresh_token\", jsonData.refresh); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Login (Patient)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/login/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "login",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"patient@example.com\",\n    \"password\": \"StrongPass123!\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }",
                                            "if (jsonData.refresh) { pm.collectionVariables.set(\"refresh_token\", jsonData.refresh); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Forgot Password",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/password_reset/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "password_reset",
                                        ""
                                    ]
                                },
                                "description": "Demande de réinitialisation du mot de passe (sans token).",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"patient@example.com\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Refresh Token",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/refresh/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "refresh",
                                        ""
                                    ]
                                },
                                "description": "Obtenir un nouvel access token à partir du refresh token.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Logout",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/logout/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "logout",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Profile",
                    "item": [
                        {
                            "name": "Get My Profile",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        },
                        {
                            "name": "Complete Profile",
                            "request": {
                                "method": "PATCH",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/users/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": "Update patient details",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"patient_details\": {\n        \"diabetes_type\": \"TYPE1\",\n        \"diagnosis_date\": \"2020-01-01\"\n    },\n    \"phone_number\": \"0606060606\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Care Team",
                    "item": [
                        {
                            "name": "Invite Doctor",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/invite-doctor/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "invite-doctor",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"doctor@example.com\",\n    \"role\": \"REFERENT_DOCTOR\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Add Family Member (Famille / Aidant / Nurse)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/add-family/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "add-family",
                                        ""
                                    ]
                                },
                                "description": "Patient ajoute un membre de la famille, un aidant ou une infirmière. Rôles acceptés : FAMILY, CAREGIVER, NURSE.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"first_name\": \"Marie\",\n    \"last_name\": \"Dupont\",\n    \"phone_number\": \"0612345678\",\n    \"address\": \"\",\n    \"relation_type\": \"Épouse\",\n    \"role\": \"FAMILY\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get My Team",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/my-team/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "my-team",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        },
                        {
                            "name": "Accept Invitation",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/accept-invitation/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "accept-invitation",
                                        ""
                                    ]
                                },
                                "description": "Accepter une invitation (médecin ou patient). Body: id_team_member (UUID).",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"id_team_member\": \"{{id_team_member}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Activities",
                    "item": [
                        {
                            "name": "Get History",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/activities/history/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "activities",
                                        "history",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        },
                        {
                            "name": "Create Log",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/activities/history/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "activities",
                                        "history",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"activity\": 1,\n    \"duration_minutes\": 30,\n    \"intensity\": \"moderate\",\n    \"start\": \"2024-01-01T10:00:00Z\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get Activity Types",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/activities/types/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "activities",
                                        "types",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        }
                    ]
                }
            ]
        },
        {
            "name": "Docteur",
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Register (Doctor)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/register/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "register",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"doctor@example.com\",\n    \"first_name\": \"Dr.\",\n    \"last_name\": \"House\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"role\": \"DOCTOR\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }",
                                            "if (jsonData.refresh) { pm.collectionVariables.set(\"refresh_token\", jsonData.refresh); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Login (Doctor)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/login/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "login",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"doctor@example.com\",\n    \"password\": \"StrongPass123!\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }",
                                            "if (jsonData.refresh) { pm.collectionVariables.set(\"refresh_token\", jsonData.refresh); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Forgot Password",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/password_reset/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "password_reset",
                                        ""
                                    ]
                                },
                                "description": "Demande de réinitialisation du mot de passe (sans token).",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"doctor@example.com\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Refresh Token",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/refresh/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "refresh",
                                        ""
                                    ]
                                },
                                "description": "Obtenir un nouvel access token à partir du refresh token.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Logout",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/logout/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "logout",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Profile",
                    "item": [
                        {
                            "name": "Get My Profile",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        },
                        {
                            "name": "Complete Profile (License)",
                            "request": {
                                "method": "PATCH",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/users/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"phone_number\": \"0102030405\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Care Team",
                    "item": [
                        {
                            "name": "Add Patient (Existing)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/add-patient/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "add-patient",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"patient@example.com\",\n    \"phone_number\": \"\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Accept Invitation",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/accept-invitation/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "accept-invitation",
                                        ""
                                    ]
                                },
                                "description": "Accepter une invitation (médecin ou patient). Body: id_team_member (UUID).",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"id_team_member\": \"{{id_team_member}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get My Team",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/my-team/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "my-team",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        }
                    ]
                }
            ]
        },
        {
            "name": "Admin (Validation Docteurs)",
            "item": [
                {
                    "name": "Login (Superadmin)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/login/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "login",
                                ""
                            ]
                        },
                        "description": "Se connecter en superadmin pour obtenir le token (ex. superadmin@example.com / StrongPass123! après reset_db). Ensuite utiliser Créer compte Admin / Superadmin ou les requêtes de validation docteurs.",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"superadmin@example.com\",\n    \"password\": \"StrongPass123!\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": [],
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }",
                                    "if (jsonData.refresh) { pm.collectionVariables.set(\"refresh_token\", jsonData.refresh); }"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Créer compte Admin (superadmin requis)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/create-admin/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "create-admin",
                                ""
                            ]
                        },
                        "description": "Créer un compte ADMIN. Réservé au superadmin (is_superuser).",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"admin@example.com\",\n    \"first_name\": \"Admin\",\n    \"last_name\": \"User\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"account_type\": \"ADMIN\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": []
                },
                {
                    "name": "Créer compte Superadmin (superadmin requis)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/create-admin/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "create-admin",
                                ""
                            ]
                        },
                        "description": "Créer un compte SUPERADMIN. Réservé au superadmin (is_superuser).",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"superadmin2@example.com\",\n    \"first_name\": \"Super\",\n    \"last_name\": \"Admin\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"account_type\": \"SUPERADMIN\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": []
                },
                {
                    "name": "Liste Docteurs en attente (PENDING)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/doctors/verification/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "doctors",
                                "verification",
                                ""
                            ]
                        },
                        "description": "Liste des docteurs en attente de validation (is_staff ou is_superuser requis). Enregistre automatiquement doctor_id du premier résultat pour Accepter/Refuser Docteur."
                    },
                    "response": [],
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.results && jsonData.results.length > 0) {",
                                    "    pm.collectionVariables.set(\"doctor_id\", jsonData.results[0].doctor_id);",
                                    "    console.log(\"doctor_id défini: \" + jsonData.results[0].doctor_id);",
                                    "} else {",
                                    "    pm.collectionVariables.unset(\"doctor_id\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Accepter Docteur (VERIFIED)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/doctors/verification/{{doctor_id}}/accept/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "doctors",
                                "verification",
                                "{{doctor_id}}",
                                "accept",
                                ""
                            ]
                        },
                        "description": "Valider un compte docteur (passer en VERIFIED). Exécuter d'abord « Liste Docteurs en attente » pour remplir automatiquement doctor_id, ou définir la variable doctor_id (UUID, ex. 1d34972b-e155-4ff8-952a-3c36251bfa13)."
                    },
                    "response": []
                },
                {
                    "name": "Refuser Docteur (REJECTED + message)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/doctors/verification/{{doctor_id}}/decline/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "doctors",
                                "verification",
                                "{{doctor_id}}",
                                "decline",
                                ""
                            ]
                        },
                        "description": "Refuser un compte docteur (REJECTED) avec un message optionnel pour le docteur.",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rejection_reason\": \"Documents non conformes. Merci de renvoyer une copie lisible de votre carte professionnelle.\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": []
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8006",
            "type": "string"
        },
        {
            "key": "token",
            "value": "YOUR_ACCESS_TOKEN_HERE",
            "type": "string"
        },
        {
            "key": "refresh_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "id_team_member",
            "value": "",
            "type": "string"
        },
        {
            "key": "doctor_id",
            "value": "",
            "type": "string"
        }
    ]
}