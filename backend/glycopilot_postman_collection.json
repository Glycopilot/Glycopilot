{
    "info": {
        "_postman_id": "b3e3e4a1-8d2b-4e4a-9b1e-2e5a7b6c8d9e",
        "name": "Glycopilot API",
        "description": "API collection for Glycopilot backend.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Patient",
            "event": [
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "var t = pm.collectionVariables.get(\"patient_token\");",
                            "if (t) { pm.collectionVariables.set(\"token\", t); }",
                            "var rt = pm.collectionVariables.get(\"patient_refresh_token\");",
                            "if (rt) { pm.collectionVariables.set(\"refresh_token\", rt); }"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Register (Patient)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/register/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "register",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"maxiboole3@gmail.com\",\n    \"first_name\": \"Jean\",\n    \"last_name\": \"Dupont\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"role\": \"PATIENT\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) {",
                                            "    pm.collectionVariables.set(\"patient_token\", jsonData.access);",
                                            "    pm.collectionVariables.set(\"token\", jsonData.access);",
                                            "}",
                                            "if (jsonData.refresh) {",
                                            "    pm.collectionVariables.set(\"patient_refresh_token\", jsonData.refresh);",
                                            "    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Login (Patient)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/login/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "login",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"maxiboole3@gmail.com\",\n    \"password\": \"StrongPass123!\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) {",
                                            "    pm.collectionVariables.set(\"patient_token\", jsonData.access);",
                                            "    pm.collectionVariables.set(\"token\", jsonData.access);",
                                            "}",
                                            "if (jsonData.refresh) {",
                                            "    pm.collectionVariables.set(\"patient_refresh_token\", jsonData.refresh);",
                                            "    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Forgot Password",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/password_reset/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "password_reset",
                                        ""
                                    ]
                                },
                                "description": "Demande de réinitialisation du mot de passe (sans token).",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"maxiboole3@gmail.com\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Refresh Token",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/refresh/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "refresh",
                                        ""
                                    ]
                                },
                                "description": "Obtenir un nouvel access token à partir du refresh token.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Logout",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/logout/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "logout",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Profile",
                    "item": [
                        {
                            "name": "Get My Profile",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": "Returns the authenticated user's profile. For patients, includes `patient_details` with `care_team`. For doctors, includes `doctor_details`."
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.identity && jsonData.identity.id_user) {",
                                            "    pm.collectionVariables.set(\"patient_id\", jsonData.identity.id_user);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Complete Profile",
                            "request": {
                                "method": "PATCH",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/users/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": "Update patient details",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"patient_details\": {\n        \"diabetes_type\": \"TYPE1\",\n        \"diagnosis_date\": \"2020-01-01\"\n    },\n    \"phone_number\": \"0606060606\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Care Team",
                    "item": [
                        {
                            "name": "Invite Doctor",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/invite-doctor/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "invite-doctor",
                                        ""
                                    ]
                                },
                                "description": "**IMPORTANT**: Requires a PATIENT token. Do not use with a Doctor token.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"lysmambouanan3@gmail.com\",\n    \"role\": \"REFERENT_DOCTOR\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.id_team_member) {",
                                            "    pm.collectionVariables.set(\"id_team_member\", jsonData.id_team_member);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Add Family Member (Famille / Aidant / Nurse)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/add-family/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "add-family",
                                        ""
                                    ]
                                },
                                "description": "Patient ajoute un membre de la famille, un aidant ou une infirmière. Rôles acceptés : FAMILY, CAREGIVER, NURSE.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"first_name\": \"Marie\",\n    \"last_name\": \"Dupont\",\n    \"phone_number\": \"0612345678\",\n    \"address\": \"\",\n    \"relation_type\": \"Épouse\",\n    \"role\": \"FAMILY\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get My Team",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/my-team/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "my-team",
                                        ""
                                    ]
                                },
                                "description": "Returns the list of care team members for the current patient."
                            },
                            "response": []
                        },
                        {
                            "name": "Accept Invitation",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/accept-invitation/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "accept-invitation",
                                        ""
                                    ]
                                },
                                "description": "Accepter une invitation (médecin ou patient). Body: id_team_member (UUID).",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"id_team_member\": \"{{id_team_member}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "prerequest",
                                    "script": {
                                        "exec": [
                                            "if (!pm.collectionVariables.get(\"id_team_member\")) {",
                                            "    throw new Error(\"id_team_member manquant. Lance d'abord une invitation.\");",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "Activities",
                    "item": [
                        {
                            "name": "Get History",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/activities/history/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "activities",
                                        "history",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "prerequest",
                                    "script": {
                                        "exec": [
                                            "if (!pm.collectionVariables.get(\"id_team_member\")) {",
                                            "    throw new Error(\"id_team_member manquant. Lance d'abord une invitation.\");",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Create Log",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/activities/history/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "activities",
                                        "history",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"activity\": \"{{activity_id}}\",\n    \"duration_minutes\": 30,\n    \"intensity\": \"moderate\",\n    \"start\": \"2024-01-01T10:00:00Z\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get Activity Types",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/activities/types/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "activities",
                                        "types",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (Array.isArray(jsonData) && jsonData.length > 0 && jsonData[0].activity_id) {",
                                            "    pm.collectionVariables.set(\"activity_id\", jsonData[0].activity_id);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "Glucose",
                    "item": [
                        {
                            "name": "Get My Glycemia History",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/glycemia/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "glycemia",
                                        ""
                                    ]
                                },
                                "description": "Returns the complete glycemia history (GlycemiaHisto) for the authenticated patient, including photos, location, and rate."
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Meals",
                    "item": [
                        {
                            "name": "Get Available Meals (Reference)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/meals/reference/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "meals",
                                        "reference",
                                        ""
                                    ]
                                },
                                "description": "List all available reference meals."
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (Array.isArray(jsonData) && jsonData.length > 0 && jsonData[0].meal_id) {",
                                            "    pm.collectionVariables.set(\"meal_id\", jsonData[0].meal_id);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Get History (Reference)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/meals/log/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "meals",
                                        "log",
                                        ""
                                    ]
                                },
                                "description": "Get user meal history."
                            },
                            "response": []
                        },
                        {
                            "name": "Get User Meals",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/meals/log/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "meals",
                                        "log",
                                        ""
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Log Meal",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"meal_id\": \"{{meal_id}}\",\n    \"taken_at\": \"2024-01-01T12:00:00Z\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/meals/log/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "meals",
                                        "log",
                                        ""
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Medications",
                    "item": [
                        {
                            "name": "Get Reference",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/medications/reference/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "medications",
                                        "reference",
                                        ""
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get User Medications",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/medications/log/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "medications",
                                        "log",
                                        ""
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get Available Medications (Reference)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/medications/reference/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "medications",
                                        "reference",
                                        ""
                                    ]
                                },
                                "description": "List all available medications that can be logged."
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (Array.isArray(jsonData) && jsonData.length > 0 && jsonData[0].medication_id) {",
                                            "    pm.collectionVariables.set(\"medication_id\", jsonData[0].medication_id);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Log Medication",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"medication_id\": \"{{medication_id}}\",\n    \"start_date\": \"2024-01-01\",\n    \"taken_at\": \"2024-01-01T08:00:00Z\",\n    \"statut\": true\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/medications/log/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "medications",
                                        "log",
                                        ""
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                }
            ]
        },
        {
            "name": "Docteur",
            "event": [
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "var t = pm.collectionVariables.get(\"doctor_token\");",
                            "if (t) { pm.collectionVariables.set(\"token\", t); }",
                            "var rt = pm.collectionVariables.get(\"doctor_refresh_token\");",
                            "if (rt) { pm.collectionVariables.set(\"refresh_token\", rt); }"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Register (Doctor)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/register/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "register",
                                        ""
                                    ]
                                },
                                "description": "Registers a new doctor. The account is created with PENDING status and requires manual validation by an ADMIN.",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"lysmambouanan3@gmail.com\",\n    \"first_name\": \"Dr.\",\n    \"last_name\": \"House\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"role\": \"DOCTOR\",\n    \"license_number\": \"10001234567\",\n    \"specialty\": \"Cardiologue\",\n    \"medical_center_address\": \"123 Rue de l'Hôpital\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) {",
                                            "    pm.collectionVariables.set(\"doctor_token\", jsonData.access);",
                                            "    pm.collectionVariables.set(\"token\", jsonData.access);",
                                            "}",
                                            "if (jsonData.refresh) {",
                                            "    pm.collectionVariables.set(\"doctor_refresh_token\", jsonData.refresh);",
                                            "    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Login (Doctor)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/login/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "login",
                                        ""
                                    ]
                                },
                                "description": "Login for doctors. Requires the account to be VERIFIED by an admin.",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"lysmambouanan3@gmail.com\",\n    \"password\": \"StrongPass123!\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) {",
                                            "    pm.collectionVariables.set(\"doctor_token\", jsonData.access);",
                                            "    pm.collectionVariables.set(\"token\", jsonData.access);",
                                            "}",
                                            "if (jsonData.refresh) {",
                                            "    pm.collectionVariables.set(\"doctor_refresh_token\", jsonData.refresh);",
                                            "    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Forgot Password",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/password_reset/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "password_reset",
                                        ""
                                    ]
                                },
                                "description": "Demande de réinitialisation du mot de passe (sans token).",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"lysmambouanan3@gmail.com\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Refresh Token",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/refresh/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "refresh",
                                        ""
                                    ]
                                },
                                "description": "Obtenir un nouvel access token à partir du refresh token.",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.access) { pm.collectionVariables.set(\"token\", jsonData.access); }"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Logout",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/logout/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "logout",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Profile",
                    "item": [
                        {
                            "name": "Get My Profile",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/auth/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "auth",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        },
                        {
                            "name": "Complete Profile (License)",
                            "request": {
                                "method": "PATCH",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/users/me/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users",
                                        "me",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"phone_number\": \"0102030405\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Care Team",
                    "item": [
                        {
                            "name": "Add Patient (Existing)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/add-patient/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "add-patient",
                                        ""
                                    ]
                                },
                                "description": "",
                                "body": {
                                    "mode": "raw",
                            "raw": "{\n    \"email\": \"maxiboole3@gmail.com\",\n    \"phone_number\": \"\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": [],
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.id_team_member) {",
                                            "    pm.collectionVariables.set(\"id_team_member\", jsonData.id_team_member);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "Accept Invitation",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/accept-invitation/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "accept-invitation",
                                        ""
                                    ]
                                },
                                "description": "Accepter une invitation (médecin ou patient). Body: id_team_member (UUID).",
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"id_team_member\": \"{{id_team_member}}\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get My Team",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/my-team/",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "my-team",
                                        ""
                                    ]
                                },
                                "description": ""
                            },
                            "response": []
                        },
                        {
                            "name": "Get Patient Dashboard (Doctor)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/patient-dashboard/?patient_user_id={{patient_id}}",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "patient-dashboard",
                                        ""
                                    ],
                                    "query": [
                                        {
                                            "key": "patient_user_id",
                                            "value": "{{patient_id}}",
                                            "description": "ID of the patient user"
                                        }
                                    ]
                                },
                                "description": "Récupère le résumé complet du tableau de bord (Glucose, Alertes, Meds, Nutrition, Activité) pour le médecin. Conforme au module Dashboard Summary."
                            },
                            "response": []
                        },
                        {
                            "name": "Get Patient Meals",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/patient-meals/?patient_user_id={{patient_id}}",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "patient-meals",
                                        ""
                                    ],
                                    "query": [
                                        {
                                            "key": "patient_user_id",
                                            "value": "{{patient_id}}",
                                            "description": "ID of the patient user"
                                        }
                                    ]
                                },
                                "description": "Fetch patient meal history."
                            },
                            "response": []
                        },
                        {
                            "name": "Get Patient Medications",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/patient-medications/?patient_user_id={{patient_id}}",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "patient-medications",
                                        ""
                                    ],
                                    "query": [
                                        {
                                            "key": "patient_user_id",
                                            "value": "{{patient_id}}",
                                            "description": "ID of the patient user"
                                        }
                                    ]
                                },
                                "description": "Fetch patient medication history."
                            },
                            "response": []
                        },
                        {
                            "name": "Get Patient Glycemia",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/api/doctors/care-team/patient-glycemia/?patient_user_id={{patient_id}}",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "doctors",
                                        "care-team",
                                        "patient-glycemia",
                                        ""
                                    ],
                                    "query": [
                                        {
                                            "key": "patient_user_id",
                                            "value": "{{patient_id}}",
                                            "description": "ID of the patient user"
                                        }
                                    ]
                                },
                                "description": "Fetch patient complete glycemia history (GlycemiaHisto)."
                            },
                            "response": []
                        }
                    ]
                }
            ]
        },
        {
            "name": "Admin (Validation Docteurs)",
            "event": [
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "var t = pm.collectionVariables.get(\"admin_token\");",
                            "if (t) { pm.collectionVariables.set(\"token\", t); }",
                            "var rt = pm.collectionVariables.get(\"admin_refresh_token\");",
                            "if (rt) { pm.collectionVariables.set(\"refresh_token\", rt); }"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "item": [
                {
                    "name": "Login (Superadmin)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/login/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "login",
                                ""
                            ]
                        },
                        "description": "Se connecter en superadmin pour obtenir le token (ex. superadmin@example.com / StrongPass123! après reset_db). Ensuite utiliser Créer compte Admin / Superadmin ou les requêtes de validation docteurs.",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"superadmin@example.com\",\n    \"password\": \"StrongPass123!\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": [],
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.access) {",
                                    "    pm.collectionVariables.set(\"admin_token\", jsonData.access);",
                                    "    pm.collectionVariables.set(\"token\", jsonData.access);",
                                    "}",
                                    "if (jsonData.refresh) {",
                                    "    pm.collectionVariables.set(\"admin_refresh_token\", jsonData.refresh);",
                                    "    pm.collectionVariables.set(\"refresh_token\", jsonData.refresh);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Créer compte Admin (superadmin requis)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/create-admin/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "create-admin",
                                ""
                            ]
                        },
                        "description": "Créer un compte ADMIN. Réservé au superadmin (is_superuser).",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"admin@example.com\",\n    \"first_name\": \"Admin\",\n    \"last_name\": \"User\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"account_type\": \"ADMIN\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": []
                },
                {
                    "name": "Créer compte Superadmin (superadmin requis)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/create-admin/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "create-admin",
                                ""
                            ]
                        },
                        "description": "Créer un compte SUPERADMIN. Réservé au superadmin (is_superuser).",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"superadmin2@example.com\",\n    \"first_name\": \"Super\",\n    \"last_name\": \"Admin\",\n    \"password\": \"StrongPass123!\",\n    \"password_confirm\": \"StrongPass123!\",\n    \"account_type\": \"SUPERADMIN\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": []
                },
                {
                    "name": "Liste Docteurs en attente (PENDING)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/doctors/verification/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "doctors",
                                "verification",
                                ""
                            ]
                        },
                        "description": "Liste des docteurs en attente de validation (is_staff ou is_superuser requis). Enregistre automatiquement doctor_id du premier résultat pour Accepter/Refuser Docteur."
                    },
                    "response": [],
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "var targetEmail = (pm.collectionVariables.get(\"doctor_email\") || \"\").toLowerCase();",
                                    "var results = (jsonData && jsonData.results) ? jsonData.results : [];",
                                    "if (results.length > 0) {",
                                    "    var match = targetEmail",
                                    "        ? results.find(function (r) { return (r.user_details && r.user_details.email || \"\").toLowerCase() === targetEmail; })",
                                    "        : results[0];",
                                    "    if (!match && results.length > 0) {",
                                    "        match = results[0];",
                                    "    }",
                                    "    if (match && match.doctor_id) {",
                                    "        pm.collectionVariables.set(\"doctor_id\", match.doctor_id);",
                                    "        pm.environment.set(\"doctor_id\", match.doctor_id);",
                                    "    } else {",
                                    "        pm.collectionVariables.unset(\"doctor_id\");",
                                    "        pm.environment.unset(\"doctor_id\");",
                                    "    }",
                                    "} else {",
                                    "    pm.collectionVariables.unset(\"doctor_id\");",
                                    "    pm.environment.unset(\"doctor_id\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Accepter Docteur (VERIFIED)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/doctors/verification/{{doctor_id}}/accept/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "doctors",
                                "verification",
                                "{{doctor_id}}",
                                "accept",
                                ""
                            ]
                        },
                        "description": "Valider un compte docteur (passer en VERIFIED). Envoie un email de bienvenue au médecin. Exécuter d'abord « Liste Docteurs en attente » pour remplir automatiquement doctor_id.",
                        "body": {
                            "mode": "raw",
                            "raw": "{}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": [],
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "var doctorId = pm.collectionVariables.get(\"doctor_id\") || pm.environment.get(\"doctor_id\");",
                                    "if (!doctorId) {",
                                    "    throw new Error(\"doctor_id manquant. Lance d'abord 'Liste Docteurs en attente (PENDING)' et vérifie doctor_email.\");",
                                    "}",
                                    "pm.collectionVariables.set(\"doctor_id\", doctorId);"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Refuser Docteur (REJECTED + message)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/doctors/verification/{{doctor_id}}/decline/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "doctors",
                                "verification",
                                "{{doctor_id}}",
                                "decline",
                                ""
                            ]
                        },
                        "description": "Refuser un compte docteur (REJECTED) avec un message optionnel. Envoie un email de refus au médecin avec le motif.",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rejection_reason\": \"Documents non conformes. Merci de renvoyer une copie lisible de votre carte professionnelle.\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        }
                    },
                    "response": [],
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "var doctorId = pm.collectionVariables.get(\"doctor_id\") || pm.environment.get(\"doctor_id\");",
                                    "if (!doctorId) {",
                                    "    throw new Error(\"doctor_id manquant. Lance d'abord 'Liste Docteurs en attente (PENDING)' et vérifie doctor_email.\");",
                                    "}",
                                    "pm.collectionVariables.set(\"doctor_id\", doctorId);"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8006",
            "type": "string"
        },
        {
            "key": "token",
            "value": "YOUR_ACCESS_TOKEN_HERE",
            "type": "string"
        },
        {
            "key": "patient_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "doctor_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "admin_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "refresh_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "patient_refresh_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "doctor_refresh_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "admin_refresh_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "id_team_member",
            "value": "",
            "type": "string"
        },
        {
            "key": "patient_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "activity_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "meal_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "medication_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "doctor_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "doctor_email",
            "value": "lysmambouanan3@gmail.com",
            "type": "string"
        }
    ]
}