#!/bin/sh

# ExÃ©cuter commitlint et capturer le rÃ©sultat
npx commitlint --edit $1 --verbose

# Si commitlint Ã©choue, afficher un message d'aide
if [ $? -ne 0 ]; then
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "âŒ Votre message de commit ne respecte pas les conventions"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  echo "ğŸ“‹ Format requis:"
  echo "   type: description courte en minuscules"
  echo ""
  echo "ğŸ·ï¸  Types autorisÃ©s:"
  echo "   feat      - Nouvelle fonctionnalitÃ©"
  echo "   fix       - Correction de bug"
  echo "   docs      - Documentation"
  echo "   style     - Formatage (pas de changement logique)"
  echo "   refactor  - Refactorisation"
  echo "   perf      - AmÃ©lioration de performance"
  echo "   test      - Ajout/modification de tests"
  echo "   chore     - TÃ¢ches techniques"
  echo "   revert    - Annulation d'un commit"
  echo ""
  echo "âœ… Exemples valides:"
  echo "   feat: add user authentication"
  echo "   fix: resolve login redirect issue"
  echo "   docs: update API documentation"
  echo ""
  echo "âŒ Erreurs courantes:"
  echo "   â€¢ Pas de majuscule au dÃ©but de la description"
  echo "   â€¢ Pas de point Ã  la fin"
  echo "   â€¢ Maximum 100 caractÃ¨res"
  echo ""
  echo "ğŸ“š Documentation complÃ¨te: docs/commit-conventions.md"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  exit 1
fi
